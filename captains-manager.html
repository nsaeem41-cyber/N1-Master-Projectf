<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N One | Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø³Ø·ÙˆÙ„ (Captains Empire)</title>
    
    <script src="https://cdn.jsdelivr.net/gh/nsaeem41-cyber/N1-Master-Project@main/n-one-core.js"></script>

    <style>
        /* ================= ØªØµÙ…ÙŠÙ… Captain Elite (Royal Blue & Gold) ================= */
        :root {
            --primary: #1565c0;      /* Ø£Ø²Ø±Ù‚ Ù…Ù„ÙƒÙŠ Ù„Ù„ÙƒØ¨Ø§ØªÙ† */
            --dark: #0d47a1;         /* Ø£Ø²Ø±Ù‚ ØºØ§Ù…Ù‚ */
            --gold: #ffb300;         /* Ø°Ù‡Ø¨ÙŠ Ø­ÙŠÙˆÙŠ */
            --bg: #e3f2fd;           /* Ø®Ù„ÙÙŠØ© Ø³Ù…Ø§ÙˆÙŠØ© ÙØ§ØªØ­Ø© */
            --text: #37474f;
            --success: #2e7d32;
            --danger: #c62828;
            --white: #ffffff;
        }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: var(--bg); margin: 0; padding: 0; 
            color: var(--text); user-select: none; 
        }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø£Ø³Ø·ÙˆÙ„ */
        .navbar { 
            background: linear-gradient(135deg, var(--dark), var(--primary)); 
            height: 80px; display: flex; justify-content: space-between; align-items: center; 
            padding: 0 40px; box-shadow: 0 4px 20px rgba(13, 71, 161, 0.3); 
            border-bottom: 4px solid var(--gold); position: sticky; top: 0; z-index: 1000; 
        }
        .brand { font-size: 26px; font-weight: 900; color: white; letter-spacing: 1px; }
        .gold-text { color: var(--gold); }
        .btn-close { background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 8px 15px; border-radius: 8px; cursor: pointer; transition: 0.3s; }
        .btn-close:hover { background: var(--danger); border-color: var(--danger); }

        .container { max-width: 1300px; margin: 30px auto; padding: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }

        /* Ø§Ù„ÙƒØ±ÙˆØª */
        .card { 
            background: var(--white); border-radius: 20px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
            border-top: 5px solid var(--primary); 
            overflow: hidden; position: relative;
        }
        .card.finance { border-top-color: var(--gold); } /* ÙƒØ±Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ù…Ù…ÙŠØ² */
        
        .card-header { 
            padding: 20px; background: #f5fafd; border-bottom: 1px solid #e1f5fe;
            display: flex; justify-content: space-between; align-items: center;
        }
        .card-title { font-size: 18px; font-weight: 800; color: var(--dark); display: flex; align-items: center; gap: 10px; }

        .card-body { padding: 25px; }

        /* Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø± */
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; font-size: 13px; color: #546e7a; }
        
        input, select { 
            width: 100%; padding: 14px; border: 2px solid #cfd8dc; border-radius: 12px; 
            outline: none; background: #fafafa; font-size: 14px; box-sizing: border-box; transition: 0.3s; 
        }
        input:focus { border-color: var(--primary); background: white; }

        .btn-main { 
            width: 100%; padding: 15px; border: none; border-radius: 12px; 
            font-weight: bold; cursor: pointer; color: white; font-size: 15px; 
            transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .btn-blue { background: var(--primary); } .btn-blue:hover { background: var(--dark); }
        .btn-gold { background: var(--gold); color: #3e2723; } .btn-gold:hover { background: #ffca28; }
        .btn-green { background: var(--success); } .btn-green:hover { background: #1b5e20; }

        /* Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ­ÙƒÙ… (Switch) */
        .switch-wrapper { display: flex; align-items: center; gap: 10px; background: #fff8e1; padding: 10px 15px; border-radius: 10px; border: 1px solid #ffe082; }
        .switch { position: relative; display: inline-block; width: 40px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--success); }
        input:checked + .slider:before { transform: translateX(20px); }

        /* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
        .table-container { height: 300px; overflow-y: auto; border: 1px solid #eee; border-radius: 10px; margin-top: 10px; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        th { background: #eceff1; color: #455a64; padding: 12px; text-align: right; position: sticky; top: 0; }
        td { padding: 12px; border-bottom: 1px solid #eee; color: #37474f; }
        
        .badge { padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: bold; }
        .bg-pending { background: #fff3e0; color: #e65100; }
        
        /* Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ */
        .search-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .search-row input { flex: 1; border-color: var(--gold); }

        /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… */
        #finance-status { margin-top: 15px; padding: 10px; border-radius: 8px; display: none; text-align: center; font-weight: bold; }

        @media (max-width: 900px) { .container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="brand">N <span class="gold-text">One</span> Fleet Command ğŸ‘®â€â™‚ï¸</div>
        <button class="btn-close" onclick="window.close()">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© âŒ</button>
    </nav>

    <div class="container">

        <div class="card">
            <div class="card-header">
                <div class="card-title">ğŸ“ ØªØ³Ø¬ÙŠÙ„ ÙƒØ§Ø¨ØªÙ† Ø¬Ø¯ÙŠØ¯ (ØªØ¹ÙŠÙŠÙ†)</div>
                <div style="font-size:12px; color:#78909c;">Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ Ø±Ø³Ù…ÙŠ</div>
            </div>
            <div class="card-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ</label>
                        <input type="text" id="new_cap_name" placeholder="Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ø¨ØªÙ† Ø§Ù„Ø±Ø³Ù…ÙŠ">
                    </div>
                    <div class="form-group">
                        <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨)</label>
                        <input type="tel" id="new_cap_phone" placeholder="07xxxxxxxx">
                    </div>
                    <div class="form-group">
                        <label>ØªØ±Ù…ÙŠØ² Ø§Ù„Ø³ÙŠØ§Ø±Ø© (Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø§Ù„ÙŠ)</label>
                        <input type="text" id="new_cap_code" placeholder="Ù…Ø«Ù„Ø§Ù‹: C-101" style="border-color:var(--gold); font-weight:bold;">
                    </div>
                    <div class="form-group" style="display:flex; gap:10px;">
                        <div style="flex:1;">
                            <label>Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</label>
                            <input type="text" id="new_cap_car" placeholder="Ù…Ø«Ù„Ø§Ù‹: Kia Sephia">
                        </div>
                        <div style="flex:1;">
                            <label>Ù…ÙˆØ¯ÙŠÙ„</label>
                            <input type="number" id="new_cap_model" placeholder="2016">
                        </div>
                    </div>
                    <button class="btn-main btn-blue" onclick="registerCaptain()">
                        <span>+ Ø§Ø¹ØªÙ…Ø§Ø¯ ÙˆØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙƒØ§Ø¨ØªÙ†</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="card finance">
            <div class="card-header">
                <div class="card-title">ğŸ’° Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ (Wallet System)</div>
                
                <div class="switch-wrapper">
                    <span style="font-size:12px; font-weight:bold; color:#f57f17;">Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙƒØ¨Ø§ØªÙ†:</span>
                    <label class="switch">
                        <input type="checkbox" id="transfer-switch" onchange="toggleTransferFeature()" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            
            <div class="card-body">
                <div class="search-row">
                    <input type="text" id="wallet_search" placeholder="ğŸ” Ø¨Ø­Ø«: Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø£Ùˆ ØªØ±Ù…ÙŠØ² Ø§Ù„Ø³ÙŠØ§Ø±Ø© (C-xxx)">
                    <button class="btn-main btn-blue" style="width:auto; padding:0 20px;" onclick="searchWallet()">Ø¨Ø­Ø«</button>
                </div>

                <div id="wallet-details" style="display:none; background:#f9fbe7; padding:15px; border-radius:12px; border:1px solid #f0f4c3; margin-bottom:15px;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                        <span style="font-weight:bold; color:var(--dark);" id="w_cap_name">---</span>
                        <span style="font-weight:bold; color:var(--gold); font-size:18px;" id="w_balance">0.00 Ø¯.Ø£</span>
                    </div>
                    <div style="font-size:12px; color:#666;">Ø§Ù„ØªØ±Ù…ÙŠØ²: <span id="w_code">---</span> | Ø§Ù„Ù‡Ø§ØªÙ: <span id="w_phone">---</span></div>
                </div>

                <div class="form-group">
                    <label>Ø§Ù„Ù…Ø¨Ù„Øº (Ø¯.Ø£)</label>
                    <input type="number" id="wallet_amount" placeholder="Ø§Ù„Ù‚ÙŠÙ…Ø© Ù„Ù„Ø´Ø­Ù† Ø£Ùˆ Ø§Ù„Ø®ØµÙ…">
                </div>

                <div style="display:flex; gap:10px;">
                    <button class="btn-main btn-gold" onclick="updateBalance('add')">â• Ø´Ø­Ù† Ø±ØµÙŠØ¯</button>
                    <button class="btn-main" style="background:var(--danger);" onclick="updateBalance('deduct')">â– Ø®ØµÙ… / ØºØ±Ø§Ù…Ø©</button>
                </div>

                <div id="finance-status"></div>
            </div>
        </div>

        <div class="card" style="grid-column: span 2;">
            <div class="card-header">
                <div class="card-title">ğŸŒ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© (Web Requests)</div>
                <div style="font-size:12px; color:#78909c;">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©</div>
            </div>
            <div class="card-body">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Ø§Ù„Ø§Ø³Ù…</th>
                                <th>Ø§Ù„Ù‡Ø§ØªÙ</th>
                                <th>Ø§Ù„Ø³ÙŠØ§Ø±Ø©</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
                            </tr>
                        </thead>
                        <tbody id="requests-table">
                            <tr><td colspan="5" style="text-align:center; padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ø¹Ù„Ù‚Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ â˜ºï¸</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <script>
        // ========================================================
        // Ø¹Ù‚Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø³Ø·ÙˆÙ„ v1.0 (Captain Brain) ğŸ§ 
        // ========================================================
        
        if (typeof N_ONE_CORE !== 'undefined') {
            N_ONE_CORE.API_URL = "https://script.google.com/macros/s/AKfycbybaX1dgu-rVIkUAz2w6H2NdYIuv3zKkmPbHON8NTRclD3H6cVgyW5SAzFfAPNcMt6g/exec";
        }

        let currentCaptain = null; // Ø§Ù„ÙƒØ§Ø¨ØªÙ† Ø§Ù„Ù…Ø®ØªØ§Ø± Ø­Ø§Ù„ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ù…Ø§Ù„ÙŠØ©
        let transferEnabled = true;

        window.onload = function() {
            // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø­Ø§Ù„Ø© Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ­ÙˆÙŠÙ„
            const savedTransfer = localStorage.getItem('nOne_cap_transfer_status');
            if (savedTransfer !== null) {
                transferEnabled = (savedTransfer === 'true');
                document.getElementById('transfer-switch').checked = transferEnabled;
            }
        };

        // 1. Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØªØ­ÙˆÙŠÙ„
        function toggleTransferFeature() {
            transferEnabled = document.getElementById('transfer-switch').checked;
            localStorage.setItem('nOne_cap_transfer_status', transferEnabled);
            alert(transferEnabled ? "âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ù…ÙŠØ²Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙƒØ¨Ø§ØªÙ†" : "â›” ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ù…ÙŠØ²Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ø¤Ù‚ØªØ§Ù‹");
        }

        // 2. Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ (Ù…Ø­ÙØ¸Ø©)
        async function searchWallet() {
            const query = document.getElementById('wallet_search').value.trim();
            if(!query) return alert("Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø£Ùˆ ØªØ±Ù…ÙŠØ² Ù„Ù„Ø¨Ø­Ø«");

            showMsg("Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ... â³", "gold");

            try {
                const data = await N_ONE_CORE.fetchData('read');
                // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø¹Ù…ÙˆØ¯ cap_phone Ø£Ùˆ cap_code (Ø³Ù†ÙØªØ±Ø¶ Ø£Ù† Ø§Ù„Ø§Ø³Ù… Ù‡Ùˆ Ø§Ù„ØªØ±Ù…ÙŠØ² Ù…Ø¤Ù‚ØªØ§ Ø£Ùˆ Ø­Ù‚Ù„ Ù…Ø®ØµØµ)
                // Ù‡Ù†Ø§ Ø³Ù†Ø¹ØªØ¨Ø± Ø£Ù† Ø§Ù„Ù€ user Ù‡Ùˆ Ø§Ù„ØªØ±Ù…ÙŠØ² Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ Ù„Ù„ØªØ¨Ø³ÙŠØ· ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø©
                const captain = data.find(u => 
                    (u.type === 'captain') && 
                    (String(u.cap_phone).includes(query) || String(u.user).includes(query))
                );

                if (captain) {
                    currentCaptain = captain;
                    document.getElementById('w_cap_name').innerText = captain.name;
                    document.getElementById('w_code').innerText = captain.user; // Ø§Ù„ØªØ±Ù…ÙŠØ²
                    document.getElementById('w_phone').innerText = captain.cap_phone;
                    // Ø§Ù„Ø±ØµÙŠØ¯: Ù†ÙØªØ±Ø¶ ÙˆØ¬ÙˆØ¯ Ø¹Ù…ÙˆØ¯ 'balance' Ø£Ùˆ Ø³Ù†Ø­Ø³Ø¨Ù‡ Ù„Ø§Ø­Ù‚Ø§Ù‹ (Ù…Ø¨Ø¯Ø¦ÙŠØ§Ù‹ 0)
                    // ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ø³Ù†Ø¶ÙŠÙ Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø±ØµÙŠØ¯ Ù„Ù„Ø³ÙŠØ±ÙØ±
                    document.getElementById('w_balance').innerText = (captain.balance || "0.00") + " Ø¯.Ø£"; 
                    
                    document.getElementById('wallet-details').style.display = 'block';
                    hideMsg();
                } else {
                    showMsg("âŒ Ø§Ù„ÙƒØ§Ø¨ØªÙ† ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯", "red");
                    currentCaptain = null;
                    document.getElementById('wallet-details').style.display = 'none';
                }
            } catch (e) { console.error(e); }
        }

        // 3. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ (Ù…Ø­Ø§ÙƒØ§Ø© Ø°ÙƒÙŠØ©)
        async function updateBalance(type) {
            if (!currentCaptain) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙƒØ§Ø¨ØªÙ† Ø£ÙˆÙ„Ø§Ù‹");
            const amount = parseFloat(document.getElementById('wallet_amount').value);
            if (!amount || amount <= 0) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­");

            const actionText = type === 'add' ? "Ø´Ø­Ù†" : "Ø®ØµÙ…";
            if (!confirm(`ØªØ£ÙƒÙŠØ¯ Ø¹Ù…Ù„ÙŠØ© ${actionText} Ø¨Ù…Ø¨Ù„Øº ${amount} Ø¯.Ø£ Ù„Ù„ÙƒØ§Ø¨ØªÙ† ${currentCaptain.name}ØŸ`)) return;

            // Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙØ¹Ù„ÙŠ (Ù„Ø§Ø­Ù‚Ø§Ù‹)
            showMsg(`âœ… ØªÙ…Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„${actionText} Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«...`, "green");
            
            // ØªØµÙÙŠØ± Ø§Ù„Ø­Ù‚Ù„
            document.getElementById('wallet_amount').value = '';
        }

        // 4. ØªØ³Ø¬ÙŠÙ„ ÙƒØ§Ø¨ØªÙ† Ø¬Ø¯ÙŠØ¯ (ØªØ¹ÙŠÙŠÙ†)
        async function registerCaptain() {
            const name = document.getElementById('new_cap_name').value;
            const phone = document.getElementById('new_cap_phone').value;
            const code = document.getElementById('new_cap_code').value; // Ø§Ù„ØªØ±Ù…ÙŠØ²

            if(!name || !phone || !code) return alert("Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø·Ù„ÙˆØ¨Ø©");

            // Ù‡Ù†Ø§ Ù†Ø³ØªØ®Ø¯Ù… Ø¯Ø§Ù„Ø© Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù† n-one-core.js
            // Ù†Ø¹ØªØ¨Ø± Ø§Ù„Ù€ code Ù‡Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (User ID) Ù„Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ø§Ù„Ù…Ø§Ù„ÙŠ
            const newCapData = {
                id: "CAP_" + Date.now(),
                user: code, // Ø§Ù„ØªØ±Ù…ÙŠØ² Ù‡Ùˆ Ø§Ù„ÙŠÙˆØ²Ø±
                pass: "123456", // ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
                name: name,
                role: "captain",
                type: "captain",
                cap_phone: phone,
                status: "active",
                expiry: "2030-01-01" // Ø¹Ù‚Ø¯ Ù…ÙØªÙˆØ­ Ù…Ø¨Ø¯Ø¦ÙŠØ§Ù‹
            };

            showMsg("Ø¬Ø§Ø±ÙŠ ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙƒØ§Ø¨ØªÙ†... â³", "blue");
            try {
                await N_ONE_CORE.postData('add', [newCapData]);
                alert("ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙƒØ§Ø¨ØªÙ† ÙˆØ§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØªØ±Ù…ÙŠØ² Ø¨Ù†Ø¬Ø§Ø­ ğŸ‘®â€â™‚ï¸âœ…");
                // ØªÙ†Ø¸ÙŠÙ
                document.getElementById('new_cap_name').value = '';
                document.getElementById('new_cap_phone').value = '';
                document.getElementById('new_cap_code').value = '';
                hideMsg();
            } catch (e) { showMsg("Ø­Ø¯Ø« Ø®Ø·Ø£", "red"); }
        }

        function showMsg(text, color) {
            const el = document.getElementById('finance-status');
            el.innerText = text;
            el.style.display = 'block';
            el.style.color = color === 'red' ? 'white' : '#333';
            el.style.background = color === 'red' ? '#ef5350' : (color === 'green' ? '#c8e6c9' : '#e3f2fd');
        }
        function hideMsg() { document.getElementById('finance-status').style.display = 'none'; }

    </script>
</body>
</html>
