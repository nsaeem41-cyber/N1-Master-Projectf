<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N1 Global - Administrative Management</title>
    <style>
        :root {
            --primary-dark: #1a237e;
            --accent-blue: #0288d1;
            --success-green: #2e7d32;
            --bg-gray: #f5f7f9;
            --white: #ffffff;
            --danger: #c62828;
        }

        body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-gray);
            margin: 0;
            padding: 0;
            color: #2c3e50;
        }

        /* Top Admin Bar */
        .admin-header {
            background: var(--primary-dark);
            color: var(--white);
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .header-title {
            font-size: 20px;
            font-weight: 800;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .lang-btn {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 6px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
        }

        .logout-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 8px 18px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 700;
        }

        /* Main Container */
        .main-content {
            padding: 40px;
            max-width: 900px;
            margin: 0 auto;
        }

        .admin-card {
            background: var(--white);
            padding: 40px;
            border-radius: 4px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border-top: 5px solid var(--accent-blue);
        }

        .section-header {
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .section-header h2 {
            margin: 0;
            font-size: 22px;
            color: var(--primary-dark);
        }

        /* Form Styling */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: right;
        }

        label {
            display: block;
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--primary-dark);
            text-transform: uppercase;
        }

        input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #dee2e6;
            border-radius: 3px;
            box-sizing: border-box;
            background: #fcfcfc;
            font-size: 15px;
            text-align: right;
        }

        input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(2, 136, 209, 0.1);
        }

        .full-width { grid-column: span 2; }

        .submit-action {
            width: 100%;
            padding: 15px;
            background: var(--success-green);
            color: var(--white);
            border: none;
            border-radius: 3px;
            font-weight: 700;
            cursor: pointer;
            font-size: 16px;
            transition: 0.3s;
            margin-top: 10px;
        }

        .submit-action:hover {
            background: #1b5e20;
            box-shadow: 0 5px 15px rgba(46, 125, 50, 0.3);
        }

        #sync-status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 4px;
            text-align: center;
            font-weight: 600;
            display: none;
        }
    </style>
</head>
<body>

<header class="admin-header">
    <div class="header-title" id="h-title">N1 - ADMIN CONTROL</div>
    <div class="nav-controls">
        <button class="lang-btn" onclick="toggleAdminLang()">English</button>
        <button class="logout-btn" id="l-btn" onclick="terminateAdminSession()">Ø®Ø±ÙˆØ¬</button>
    </div>
</header>

<div class="main-content">
    <div class="admin-card">
        <div class="section-header">
            <h2 id="form-heading">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø´Ø±ÙŠÙƒ Ø¬Ø¯ÙŠØ¯</h2>
        </div>

        <div class="form-grid">
            <div class="input-group">
                <label id="lbl-u">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø´Ø±ÙƒØ©</label>
                <input type="text" id="comp-user" placeholder="Company ID">
            </div>
            <div class="input-group">
                <label id="lbl-p">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¢Ù…Ù†Ø©</label>
                <input type="password" id="comp-pass" placeholder="Security Password">
            </div>
            <div class="input-group full-width">
                <label id="lbl-n">Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ø±Ø³Ù…ÙŠ</label>
                <input type="text" id="comp-name" placeholder="Official Company Name">
            </div>
            <div class="input-group full-width">
                <label id="lbl-f">Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø£Ø±Ø¯Ù†ÙŠ)</label>
                <input type="number" id="comp-fee" placeholder="0.00">
            </div>
            
            <button class="submit-action full-width" id="btn-sync" onclick="processClientSync()">Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆÙ…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </div>

        <div id="sync-status"></div>
    </div>
</div>

<script>
    let adminLang = 'ar';

    // Ø­Ù…Ø§ÙŠØ© ÙˆÙØ­Øµ Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø¯Ø§Ø¦Ù…Ø© ðŸ˜Š
    window.addEventListener('DOMContentLoaded', () => {
        const adminData = JSON.parse(localStorage.getItem('loggedInUser'));
        if (!adminData || adminData.role !== 'admin') {
            window.location.href = 'index.html';
        }
    });

    async function processClientSync() {
        const btn = document.getElementById('btn-sync');
        const status = document.getElementById('sync-status');
        
        btn.disabled = true;
        btn.innerText = adminLang === 'ar' ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©...' : 'Synchronizing...';

        const payload = { data: [{
            username: document.getElementById('comp-user').value,
            password: document.getElementById('comp-pass').value,
            role: 'client',
            company_name: document.getElementById('comp-name').value,
            subscription_fee: document.getElementById('comp-fee').value
        }]};

        try {
            const response = await fetch("https://sheetdb.io/api/v1/zuo2qyjeryhxm", {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(payload)
            });

            const result = await response.json();
            if (result.created === 1) {
                status.style.display = 'block';
                status.style.background = '#e8f5e9';
                status.style.color = '#2e7d32';
                status.innerText = adminLang === 'ar' ? 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆÙ…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­' : 'Account created and data synced successfully';
                document.querySelectorAll('input').forEach(i => i.value = '');
            }
        } catch (e) {
            status.style.display = 'block';
            status.style.background = '#ffebee';
            status.style.color = '#c62828';
            status.innerText = adminLang === 'ar' ? 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©!' : 'Error: Synchronization failed!';
        } finally {
            btn.disabled = false;
            btn.innerText = adminLang === 'ar' ? 'Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆÙ…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª' : 'Authorize & Sync Account';
        }
    }

    function toggleAdminLang() {
        adminLang = adminLang === 'ar' ? 'en' : 'ar';
        const isAr = adminLang === 'ar';
        document.documentElement.lang = isAr ? 'ar' : 'en';
        document.documentElement.dir = isAr ? 'rtl' : 'ltr';

        document.querySelector('.lang-btn').innerText = isAr ? 'English' : 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©';
        document.getElementById('h-title').innerText = isAr ? 'N1 - Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©' : 'N1 - CENTRAL CONTROL';
        document.getElementById('l-btn').innerText = isAr ? 'Ø®Ø±ÙˆØ¬' : 'LOGOUT';
        document.getElementById('form-heading').innerText = isAr ? 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø´Ø±ÙŠÙƒ Ø¬Ø¯ÙŠØ¯' : 'CREATE NEW PARTNER ACCOUNT';
        
        document.getElementById('lbl-u').innerText = isAr ? 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø´Ø±ÙƒØ©' : 'COMPANY USERNAME';
        document.getElementById('lbl-p').innerText = isAr ? 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¢Ù…Ù†Ø©' : 'SECURE PASSWORD';
        document.getElementById('lbl-n').innerText = isAr ? 'Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ø±Ø³Ù…ÙŠ' : 'OFFICIAL COMPANY NAME';
        document.getElementById('lbl-f').innerText = isAr ? 'Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (JOD)' : 'SUBSCRIPTION FEE (JOD)';
        
        document.getElementById('btn-sync').innerText = isAr ? 'Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙˆÙ…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª' : 'AUTHORIZE & SYNC ACCOUNT';
        
        // ØªØºÙŠÙŠØ± Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ù†ØµÙˆØµ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø­Ù‚ÙˆÙ„ ðŸ˜Š
        document.querySelectorAll('input').forEach(i => i.style.textAlign = isAr ? 'right' : 'left');
    }

    function terminateAdminSession() {
        localStorage.clear();
        window.location.href = 'index.html';
    }
</script>
</body>
</html>
